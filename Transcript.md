# Moder Project from scratch with React

## the React entry point

The index.html in the public folder

## Supporting ES6

[Instructor] So we're going to be writing our React code using ES6 syntax and we're also going to need to add support for JSX, React's special HTML-like syntax for defining page layouts. And in order to do all this, we're going to start off by opening up a terminal inside our directory and running
`
npm install --save-dev @babel/core @babel/cli @babel/preset-env @babel/preset-react`

And then we're going to hit enter. And that might take a little while to run. But once it does, the next thing we need to do is create a .babelrc file. This file will tell the Babel transpiler what presets and plugins to use to transpile our code. So let's create this .babelrc file in the root of our directory. Call it .babelrc. Don't forget the dot before it. And inside this file, we're going to define a JSON object. And this object will have a property presets that will be an array of two strings. The first one's going to be babel/present-env, which handles the transformation of ES6 into common JS, and @babel/preset-react, which knows how to deal with JSX properly. Babel will use both of these presets to transform our code into something a browser can run, although just as a side note, most modern browsers now support ES6 syntax so this isn't as necessary as it once was. And that's it for now. Let's make sure to save this file and we'll see later on how to actually use Babel to transpile our code using the presets we've defined here.

## Installing React and ReactDOM

[Instructor] We're going to create three files inside of our source folder. This is the first actual react code that we're going to write here. The first file that we're going to create is going to be called index.js. And this will contain the code that inserts our react app into our index.HTML page. And then we're going to create two more files, one called App.js, and the other called App.css. And these two components will contain the code and the styling respectively, for the root component of our application, which for now will be the only component in our application. So we're going to code this component first, open up App.js, and we're going to write the following code. We're going to say import React from react and then import App.css. And then we're going to say const App equals, and we're going to make this a functional component here. And for now, our component is just going to be a simple div. We'll say class name equals App, so that we can add styling later on. And then we'll say h1, hello, world. Nothing too complicated here right now. And finally, down at the bottom, we're going to say export default App. So that's a very basic react app so far, the only thing we have left to do is write the code that will actually render our app component that we just created into the index.HTML page that we define.

So here's how we do that, we're going to open up the index.js file that we created. And we're going to add this code into it. We'll say import, React from react, import ReactDOM, from react-dom. And finally, we're going to say import App from App.js. And down here is where the actual rendering is going to take place. What we're going to say is ReactDOM.render. And we're going to render our App component into document.getElementByid root. So we're going to be finding our root div that we defined in our index.HTML and rendering our app inside that. And last but not least, we have to actually install react and react-dom, these two packages we're using up here, so that we can use them in our app. So we'll say `npm install react react-dom`. And that's all we need for now, the only thing we have left to do is set up Web pack to build and serve our project for us.

## Setting up Webpack

 [Instructor] So now that we've got a very simple React app setup, we need to set up Web Pack to actually build our app. And what were going to have web pack do for us is take the code in our source directory and perform some operations on it like converting the ES6 syntax and JSX to common JS and then host our public directory so that we can view our app in a browser.
 
So the first thing were going to do is install all of the packages that were going to need. So open a terminal in our react-ecosystems directory here and type `npm install --save-dev webpack webpack-cli webpack-dev-server style-loader css-loader babel-loader`. And were going to hit enter and run this and it's going to take a little while. So the next thing were going to do here is create our web pack config file that will allow us to define what exactly we want web pack to do with our source code. So were going to create a file in our base directory here and call it webpack.config.JS. And then inside this file were going to write a bunch of code so again, bear with me here. So first we're going to import a few things, path and web pack. And note that since web pack will be the thing that's actually transpiling our code from ES6 to common JS, the webpack code itself is usually written in common JS. So that's going to look like const path equals require path conts webpack wquals require webpack and now we'll define our only export which will be a JavaScript object that contains a bunch of configuration data for webpack. So we'll say module.exports. Again this is ES5 syntax here. And first we have to define our entry point for web pack which will be the index.JS files since that's the one that imports all the others, ./src/index.js and we're going to specify the mode and we'll have web pack in development mode here. And now we have to specify the rules for exactly how we want web pack to transform our code. Now for those of you who aren't familiar with webpack web pack does this by using what are called loaders. Basically packages that web pack uses to transform code in some way. So for example the first rule we'll define will be to transform our ES6 code to regular JavaScript and that'll look like this. We first have to define a module property and that's going to be an object. And then inside here we need a property that's called rules and that's going to be an array. And the first rule here as I said will be to transform our ES6 code to regular JavaScript. And I'm not going to go into too much detail here again but this will just have a property test and it's a regular expression so / \ dot parentheses JS pipe JSX dollar sign, forward slash. Don't worry if that doesn't make sense to you that's just matching all of the JS and JSX files. And were going to say exclude / node_modules because we don't want it to look inside our node modules folder. And then the loader we want to use is our babel-loader and finally we want to specify options and that's going to be an object that says presets babel /env. And that's it for that rule. Next up we're going to add the style loader and the CSS loader, and that allows us to do this thing where we import a CSS file at the top of our React components like we did in app.JS. We have to remember to add a comma up there and then were going to say test / \ .css $/, and then were going to say use style-loader and css-loader and that's it for our rules. The next thing we'll add to this conversation is the resolve property and make sure you add that outside of here. Were going to say resolve object extensions array, that's going to be star, .js and .jsx. And next up we'll define our output files which will look like this, output object path path.resolve __dirname and then dist/ and then public path is going to be /dist/ make sure you get all the slashes right by the way and then were going to say filename bundle.js. And next we're going to define some things for our development server which again will allow us to view our react application in a browser. And that will look like this. We'll say devServer object content base path.join __dirnam public/ port 3000. Public path is going to be http://localhost:3000/dist/ and then hotOnly is going to be true. This is something we'll talk about later. And one last thing outside of devServer we're going to say plugins and that's going to be an array with one item that's new webpack.HotModuleReplacementPlugin parentheses, and that's it. Now comes the exciting part. We can build and serve our React application by running npx webpack-dev-server --mode development and we can see that we got an error and that is because this is not public, it is publicPath. So if we change that and save it and try and run it again we see that it runs successfully. So now if we open up a browser and navigate to localhost:3000, we'll see the app that we just created.

## Hot-reloading with react-hot-loader

(Instructor) So we've got a React app up and running which is great, but the problem, and granted, it's not a big problem by any means but still. The problem is that whenever we make a change to our code, for example, if we were to open up our app.js component and add some exclamation points, we have to physically refresh our browser in order to see the changes. And this is something we can fix pretty easily. Let's see how. So let's open up another terminal in our directory. I usually just leave webpac dev server running in the background, and we're going to run npm install save dev React hot loader and hit enter. And once that installs, we're going to open up `App.js` and add two little things. So first, at the top here, we're going to say, `import hot from react-hot-loader` And then at the bottom, instead of just exporting our bare app component that we defined, we're going to say, `export default hot (module)(App)` as well. And this will allow us to see any changes that we make to our app without hitting refresh in our browser. We'll see that in a second. First, in order to avoid having to remember and type out our webpack dev server command every time, let's define an mpm script for it. To do that, just open up package.json. And right above our test script here, let's define a new script called dev. And then inside it we'll put our webpack dev server command. So we'll say, "Npx webpack dev server, dash, dash mode development comma." Don't forget the comma there. And now all we have to do to run our app is type, "Npm run dev," and hit enter. And it'll build and serve our app for us. And note also that we can make changes to our app now and we'll see them show up immediately without refreshing. And one more thing to note here is that while we're running our webpack server, there isn't a dist folder as we might expect. That's because what webpack dev server does is holds this dist folder in memory and serves it, and then deletes it when we stop it. If we want to actually build our React app so that we can see the files, what we can do is open up our package.json file and create another script in here called build. And then instead of running webpack dev server, we can simply run webpack, so, "npx webpack dash dash mode development." And don't forget a comma after that as well. So now we can run npm run build. And we see that our dist file with all of our trans piled code shows up right in here. But I'm going to delete that because we don't need that for now.